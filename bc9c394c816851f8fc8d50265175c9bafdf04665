{
  "comments": [
    {
      "key": {
        "uuid": "75f17d79_a84c041f",
        "filename": "lib/librte_vhost2/fd_man.c",
        "patchSetId": 2
      },
      "lineNbr": 52,
      "author": {
        "id": 1011230
      },
      "writtenOn": "2018-06-05T16:31:56Z",
      "side": 1,
      "message": "You are reinventing this almost from scratch so maybe KISS is what we want. I need to take a closer look here but I think  whole function could be changed just to:\n\n\tstatic unsigned\n\t_fdset_del(struct fdset *pfdset, int idx)\n\t{\n\t\tif (pfdset-\u003enum \u003e 0) { /* Or 1 ? */\n\t\t\tpfdset-\u003efd[idx] \u003d pfdset-\u003efd[pfdset-\u003enum - 1];\n\t\t\tpfdset-\u003erwfds[idx] \u003d pfdset-\u003erwfds[pfdset-\u003enum - 1];\n\t\t}\n\n\t\tpfdset-\u003enum--;\n\t\treturn pfdset-\u003enum;\n\t}",
      "range": {
        "startLine": 35,
        "startChar": 0,
        "endLine": 52,
        "endChar": 1
      },
      "revId": "bc9c394c816851f8fc8d50265175c9bafdf04665",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dd66aec5_ec2695a0",
        "filename": "lib/librte_vhost2/fd_man.c",
        "patchSetId": 2
      },
      "lineNbr": 52,
      "author": {
        "id": 1011218
      },
      "writtenOn": "2018-06-05T17:16:38Z",
      "side": 1,
      "message": "True, something looks over-complicated here.",
      "parentUuid": "75f17d79_a84c041f",
      "range": {
        "startLine": 35,
        "startChar": 0,
        "endLine": 52,
        "endChar": 1
      },
      "revId": "bc9c394c816851f8fc8d50265175c9bafdf04665",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d57fc6f9_353987e6",
        "filename": "lib/librte_vhost2/fd_man.c",
        "patchSetId": 2
      },
      "lineNbr": 69,
      "author": {
        "id": 1011230
      },
      "writtenOn": "2018-06-05T16:31:56Z",
      "side": 1,
      "message": "Can\u0027t see mutex destroy call.",
      "range": {
        "startLine": 69,
        "startChar": 1,
        "endLine": 69,
        "endChar": 45
      },
      "revId": "bc9c394c816851f8fc8d50265175c9bafdf04665",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "11f42e3c_64d0b8a2",
        "filename": "lib/librte_vhost2/fd_man.c",
        "patchSetId": 2
      },
      "lineNbr": 184,
      "author": {
        "id": 1011230
      },
      "writtenOn": "2018-06-05T16:31:56Z",
      "side": 1,
      "message": "Can \u0027cb\u0027 be NULL?",
      "range": {
        "startLine": 184,
        "startChar": 1,
        "endLine": 184,
        "endChar": 14
      },
      "revId": "bc9c394c816851f8fc8d50265175c9bafdf04665",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8f2541ee_d4f4fb64",
        "filename": "lib/librte_vhost2/fd_man.c",
        "patchSetId": 2
      },
      "lineNbr": 185,
      "author": {
        "id": 1011230
      },
      "writtenOn": "2018-06-05T16:31:56Z",
      "side": 1,
      "message": "It would be nic to return proper error code here.",
      "range": {
        "startLine": 185,
        "startChar": 9,
        "endLine": 185,
        "endChar": 11
      },
      "revId": "bc9c394c816851f8fc8d50265175c9bafdf04665",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1224b0ed_8b239e90",
        "filename": "lib/librte_vhost2/fd_man.c",
        "patchSetId": 2
      },
      "lineNbr": 203,
      "author": {
        "id": 1011230
      },
      "writtenOn": "2018-06-05T16:31:56Z",
      "side": 1,
      "message": "It would be nic to return proper error code here.",
      "range": {
        "startLine": 203,
        "startChar": 9,
        "endLine": 203,
        "endChar": 11
      },
      "revId": "bc9c394c816851f8fc8d50265175c9bafdf04665",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "12eecc95_42fa5c5c",
        "filename": "lib/librte_vhost2/fd_man.c",
        "patchSetId": 2
      },
      "lineNbr": 207,
      "author": {
        "id": 1011230
      },
      "writtenOn": "2018-06-05T16:31:56Z",
      "side": 1,
      "message": "Just couriouse, why you don\u0027t pump add and del trought fdset_notify()? You would not need to use mutex here at all.",
      "range": {
        "startLine": 207,
        "startChar": 1,
        "endLine": 207,
        "endChar": 34
      },
      "revId": "bc9c394c816851f8fc8d50265175c9bafdf04665",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d7f249bb_ba05082d",
        "filename": "lib/librte_vhost2/fd_man.c",
        "patchSetId": 2
      },
      "lineNbr": 207,
      "author": {
        "id": 1011218
      },
      "writtenOn": "2018-06-05T17:16:38Z",
      "side": 1,
      "message": "Good idea, I\u0027ll look into it.",
      "parentUuid": "12eecc95_42fa5c5c",
      "range": {
        "startLine": 207,
        "startChar": 1,
        "endLine": 207,
        "endChar": 34
      },
      "revId": "bc9c394c816851f8fc8d50265175c9bafdf04665",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a4c09f3d_a0ac7020",
        "filename": "lib/librte_vhost2/fd_man.h",
        "patchSetId": 2
      },
      "lineNbr": 28,
      "author": {
        "id": 1011230
      },
      "writtenOn": "2018-06-05T16:31:56Z",
      "side": 1,
      "message": "This is GNU gcc C extension and not portable. Also it will work only when compiling with C translation units. Why this is needed when you have \u0027.num\u0027?",
      "range": {
        "startLine": 28,
        "startChar": 13,
        "endLine": 28,
        "endChar": 32
      },
      "revId": "bc9c394c816851f8fc8d50265175c9bafdf04665",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f019d239_89940a21",
        "filename": "lib/librte_vhost2/fd_man.h",
        "patchSetId": 2
      },
      "lineNbr": 28,
      "author": {
        "id": 1011218
      },
      "writtenOn": "2018-06-05T17:16:38Z",
      "side": 1,
      "message": "Ack, that\u0027s not necessary.",
      "parentUuid": "a4c09f3d_a0ac7020",
      "range": {
        "startLine": 28,
        "startChar": 13,
        "endLine": 28,
        "endChar": 32
      },
      "revId": "bc9c394c816851f8fc8d50265175c9bafdf04665",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b1ee567f_e0e85011",
        "filename": "lib/librte_vhost2/fd_man.h",
        "patchSetId": 2
      },
      "lineNbr": 29,
      "author": {
        "id": 1011230
      },
      "writtenOn": "2018-06-05T16:31:56Z",
      "side": 1,
      "message": "This is GNU gcc C extension and not portable. Also it will work only when compiling with C translation units. Why this is needed when you have \u0027.num\u0027?",
      "range": {
        "startLine": 28,
        "startChar": 2,
        "endLine": 29,
        "endChar": 65
      },
      "revId": "bc9c394c816851f8fc8d50265175c9bafdf04665",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9b48aa6a_9ff87a58",
        "filename": "lib/librte_vhost2/fd_man.h",
        "patchSetId": 2
      },
      "lineNbr": 64,
      "author": {
        "id": 1011230
      },
      "writtenOn": "2018-06-05T16:31:56Z",
      "side": 1,
      "message": "Writing to one field of a union to read from other one is technically incorrect and undefined from C spec point of view.\n\nYou can introcude \n\n#define FDSET_READFD(_fdset) ((_fdset)-\u003epipefd[0])\n#define FDSET_WRITEFD(_fdset) ((_fdset)-\u003epipefd[1])\n\nOr simmilar.",
      "range": {
        "startLine": 56,
        "startChar": 0,
        "endLine": 64,
        "endChar": 5
      },
      "revId": "bc9c394c816851f8fc8d50265175c9bafdf04665",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "668abf90_f0cfb203",
        "filename": "lib/librte_vhost2/fd_man.h",
        "patchSetId": 2
      },
      "lineNbr": 64,
      "author": {
        "id": 1011218
      },
      "writtenOn": "2018-06-05T17:16:38Z",
      "side": 1,
      "message": "I believe it\u0027s fine as long as the string aliasing rule is followed - and it it since both union fields have the exact same type. Can you check this in the spec?",
      "parentUuid": "9b48aa6a_9ff87a58",
      "range": {
        "startLine": 56,
        "startChar": 0,
        "endLine": 64,
        "endChar": 5
      },
      "revId": "bc9c394c816851f8fc8d50265175c9bafdf04665",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}